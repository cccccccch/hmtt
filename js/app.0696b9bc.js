(function(){var t={6700:function(t,e,a){var s={"./af":2398,"./af.js":2398,"./ar":4207,"./ar-dz":3382,"./ar-dz.js":3382,"./ar-kw":6525,"./ar-kw.js":6525,"./ar-ly":7098,"./ar-ly.js":7098,"./ar-ma":6483,"./ar-ma.js":6483,"./ar-sa":3961,"./ar-sa.js":3961,"./ar-tn":7401,"./ar-tn.js":7401,"./ar.js":4207,"./az":903,"./az.js":903,"./be":1174,"./be.js":1174,"./bg":4615,"./bg.js":4615,"./bm":225,"./bm.js":225,"./bn":9751,"./bn-bd":544,"./bn-bd.js":544,"./bn.js":9751,"./bo":6894,"./bo.js":6894,"./br":8566,"./br.js":8566,"./bs":959,"./bs.js":959,"./ca":2683,"./ca.js":2683,"./cs":4231,"./cs.js":4231,"./cv":999,"./cv.js":999,"./cy":4302,"./cy.js":4302,"./da":3601,"./da.js":3601,"./de":5509,"./de-at":2479,"./de-at.js":2479,"./de-ch":5948,"./de-ch.js":5948,"./de.js":5509,"./dv":9838,"./dv.js":9838,"./el":5113,"./el.js":5113,"./en-au":7377,"./en-au.js":7377,"./en-ca":9626,"./en-ca.js":9626,"./en-gb":5912,"./en-gb.js":5912,"./en-ie":2931,"./en-ie.js":2931,"./en-il":2243,"./en-il.js":2243,"./en-in":9779,"./en-in.js":9779,"./en-nz":9813,"./en-nz.js":9813,"./en-sg":4318,"./en-sg.js":4318,"./eo":4957,"./eo.js":4957,"./es":9243,"./es-do":7409,"./es-do.js":7409,"./es-mx":5188,"./es-mx.js":5188,"./es-us":6927,"./es-us.js":6927,"./es.js":9243,"./et":7731,"./et.js":7731,"./eu":1072,"./eu.js":1072,"./fa":9462,"./fa.js":9462,"./fi":3368,"./fi.js":3368,"./fil":3626,"./fil.js":3626,"./fo":6421,"./fo.js":6421,"./fr":974,"./fr-ca":7780,"./fr-ca.js":7780,"./fr-ch":9719,"./fr-ch.js":9719,"./fr.js":974,"./fy":8373,"./fy.js":8373,"./ga":3861,"./ga.js":3861,"./gd":4896,"./gd.js":4896,"./gl":739,"./gl.js":739,"./gom-deva":6737,"./gom-deva.js":6737,"./gom-latn":1979,"./gom-latn.js":1979,"./gu":2001,"./gu.js":2001,"./he":9671,"./he.js":9671,"./hi":2038,"./hi.js":2038,"./hr":1228,"./hr.js":1228,"./hu":87,"./hu.js":87,"./hy-am":3569,"./hy-am.js":3569,"./id":1977,"./id.js":1977,"./is":6853,"./is.js":6853,"./it":7859,"./it-ch":5626,"./it-ch.js":5626,"./it.js":7859,"./ja":4123,"./ja.js":4123,"./jv":6457,"./jv.js":6457,"./ka":638,"./ka.js":638,"./kk":6823,"./kk.js":6823,"./km":9493,"./km.js":9493,"./kn":1288,"./kn.js":1288,"./ko":9663,"./ko.js":9663,"./ku":805,"./ku.js":805,"./ky":7550,"./ky.js":7550,"./lb":6272,"./lb.js":6272,"./lo":9135,"./lo.js":9135,"./lt":1452,"./lt.js":1452,"./lv":5782,"./lv.js":5782,"./me":2181,"./me.js":2181,"./mi":258,"./mi.js":258,"./mk":5715,"./mk.js":5715,"./ml":538,"./ml.js":538,"./mn":3086,"./mn.js":3086,"./mr":5663,"./mr.js":5663,"./ms":5100,"./ms-my":2663,"./ms-my.js":2663,"./ms.js":5100,"./mt":880,"./mt.js":880,"./my":9099,"./my.js":9099,"./nb":8709,"./nb.js":8709,"./ne":2201,"./ne.js":2201,"./nl":1016,"./nl-be":1681,"./nl-be.js":1681,"./nl.js":1016,"./nn":5330,"./nn.js":5330,"./oc-lnc":7132,"./oc-lnc.js":7132,"./pa-in":251,"./pa-in.js":251,"./pl":3948,"./pl.js":3948,"./pt":9836,"./pt-br":8831,"./pt-br.js":8831,"./pt.js":9836,"./ro":8443,"./ro.js":8443,"./ru":4,"./ru.js":4,"./sd":4510,"./sd.js":4510,"./se":3148,"./se.js":3148,"./si":542,"./si.js":542,"./sk":7637,"./sk.js":7637,"./sl":5852,"./sl.js":5852,"./sq":611,"./sq.js":611,"./sr":242,"./sr-cyrl":302,"./sr-cyrl.js":302,"./sr.js":242,"./ss":1367,"./ss.js":1367,"./sv":2927,"./sv.js":2927,"./sw":5240,"./sw.js":5240,"./ta":2692,"./ta.js":2692,"./te":2132,"./te.js":2132,"./tet":8300,"./tet.js":8300,"./tg":7211,"./tg.js":7211,"./th":4050,"./th.js":4050,"./tk":3849,"./tk.js":3849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":3650,"./tlh.js":3650,"./tr":4195,"./tr.js":4195,"./tzl":5529,"./tzl.js":5529,"./tzm":7520,"./tzm-latn":298,"./tzm-latn.js":298,"./tzm.js":7520,"./ug-cn":4134,"./ug-cn.js":4134,"./uk":5456,"./uk.js":5456,"./ur":5679,"./ur.js":5679,"./uz":9277,"./uz-latn":6446,"./uz-latn.js":6446,"./uz.js":9277,"./vi":3992,"./vi.js":3992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":2899,"./yo.js":2899,"./zh-cn":4017,"./zh-cn.js":4017,"./zh-hk":4831,"./zh-hk.js":4831,"./zh-mo":2881,"./zh-mo.js":2881,"./zh-tw":57,"./zh-tw.js":57};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id=6700},7926:function(t,e,a){"use strict";var s=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("keep-alive",[t.$route.meta.needKeep?a("router-view"):t._e()],1),t.$route.meta.needKeep?t._e():a("router-view")],1)},i=[],o={},r=o,l=a(1001),c=(0,l.Z)(r,n,i,!1,null,null,null),u=c.exports,h=(a(6888),a(8256)),d=a(2809),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"标题"}}),a("van-form",{on:{submit:t.onSubmit}},[a("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号",rules:t.rules.mobile},model:{value:t.info.mobile,callback:function(e){t.$set(t.info,"mobile",e)},expression:"info.mobile"}}),a("van-field",{attrs:{label:"验证码",placeholder:"请输入验证码",rules:t.rules.code},model:{value:t.info.code,callback:function(e){t.$set(t.info,"code",e)},expression:"info.code"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{loading:t.isLoading,"loading-text":"加载中...",round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1)],1)},p=[],f=a(6166),v=a.n(f),g=a(4665);const y="hmtt81_token",_=t=>localStorage.setItem(y,JSON.stringify(t)),k=()=>JSON.parse(localStorage.getItem(y)),b=()=>localStorage.removeItem(y);s.Z.use(g.ZP);var j=new g.ZP.Store({state:{tokenObj:k()||{},userInfo:{}},getters:{},mutations:{changeTokenObj(t,e){t.tokenObj=e,_(e)},changeUserInfo(t,e){t.userInfo=e},logout(t){t.tokenObj={},b(),t.userInfo={}}},actions:{async getUserInfo(t){try{if(!t.state.userInfo.name){const e=await U();t.commit("changeUserInfo",e.data.data)}}catch(e){}}},modules:{}});const w=v().create({baseURL:"http://geek.itheima.net/"});w.interceptors.request.use((t=>(j.state.tokenObj.token&&(t.headers.Authorization=`Bearer ${j.state.tokenObj.token}`),t)),(t=>{console.log(t)})),w.interceptors.response.use((t=>t),(async t=>{try{if(console.dir(t),401===t.request.status){const e=await v()({url:"http://toutiao.itheima.net/v1_0/authorizations",method:"put",headers:{Authorization:`Bearer ${j.state.tokenObj.refresh_token}`}});return console.log(e.data.data.token),j.commit("changeTokenObj",{token:e.data.data.token,refresh_token:j.state.tokenObj.refresh_token}),w(t.config)}}catch(e){qe.push("/login")}return Promise.reject(t)}));var C=w;const x=t=>C({url:"v1_0/authorizations",method:"post",data:t}),$=()=>C({url:"v1_0/user/profile"}),Z=t=>C({url:"/v1_0/user/profile",method:"PATCH",data:t}),S=t=>C({url:"/v1_0/user/photo",method:"PATCH",data:t}),D=()=>C({url:"/v1_0/user/channels"}),O=()=>C({url:"/v1_0/channels"}),I=t=>C({url:"/v1_0/user/channels",method:"PUT",data:t}),L=t=>C({url:"/v1_0/articles",params:t}),H=t=>C({url:`/v1_0/articles/${t}`}),z=t=>C({url:"/v1_0/comments",method:"post",data:t}),N=t=>C({url:"/v1_0/comments",method:"get",params:t}),E=t=>C({url:"/v1_0/search",params:t}),q=t=>C({url:"/v1_0/suggestion",params:t}),T=x,U=$,A=Z,M=S,P=D,R=L,B=H,G=z,J=N,K=O,V=I,Y=E,F=q;var W={name:"hmLogin",data(){return{info:{mobile:13911111111,code:246810},isLoading:!1,rules:{mobile:[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请填写正确的手机号"}],code:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"请填写正确的验证码"}]}}},methods:{async onSubmit(){this.isLoading=!0;try{const t=await T(this.info);this.$store.commit("changeUserInfo",{}),this.$store.commit("changeTokenObj",t.data.data),this.$toast.success("登录成功"),this.$route.query.back?this.$router.push(this.$route.query.back):this.$router.push("/layout/home")}catch{this.$toast.fail("登录失败")}this.isLoading=!1}}},Q=W,X=(0,l.Z)(Q,m,p,!1,null,null,null),tt=X.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view"),a("van-tabbar",{attrs:{route:""}},[a("van-tabbar-item",{attrs:{to:"/layout/home",icon:"home-o"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{to:"/layout/ask",icon:"chat-o"}},[t._v("问答")]),a("van-tabbar-item",{attrs:{to:"/layout/video",icon:"video-o"}},[t._v("视频")]),a("van-tabbar-item",{attrs:{to:"/layout/mine",icon:"friends-o"}},[t._v("我的")])],1)],1)},at=[],st={name:"layOut"},nt=st,it=(0,l.Z)(nt,et,at,!1,null,null,null),ot=it.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[a("div",{staticClass:"nav-box"})]},proxy:!0},{key:"right",fn:function(){return[a("van-button",{attrs:{to:"/search",icon:"search",round:"",type:"primary"}},[t._v("搜索")])]},proxy:!0}])}),a("van-tabs",{model:{value:t.article,callback:function(e){t.article=e},expression:"article"}},[t._l(t.channels,(function(t){return a("van-tab",{key:t.id,attrs:{title:t.name}},[a("articleList",{staticClass:"article",attrs:{articlId:t.id}})],1)})),a("div",{staticClass:"tabs-right"},[a("van-icon",{attrs:{name:"wap-nav"},on:{click:function(e){t.Channel=!0}}})],1)],2),a("van-action-sheet",{attrs:{title:"频道管理"},model:{value:t.Channel,callback:function(e){t.Channel=e},expression:"Channel"}},[a("hmChannelEdit",{attrs:{myChannel:t.channels,AllChannel:t.Allchannel},on:{off:function(e){t.Channel=!1},changemy:function(e){return t.channels.splice(e,1)},plus:function(e){return t.channels.push(e)},cut:function(e){t.article--}},model:{value:t.article,callback:function(e){t.article=e},expression:"article"}})],1)],1)},lt=[],ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ChannelEdit"},[a("div",[a("div",{staticStyle:{margin:"20px 0"}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("我的频道")]),a("van-button",{staticStyle:{float:"right"},attrs:{plain:"",type:"danger",size:"small"},on:{click:function(e){t.delShow=!t.delShow}}},[t._v(t._s(t.delShow?"取消":"编辑"))])],1),a("div",[a("van-grid",t._l(t.myChannel,(function(e,s){return a("van-grid-item",{key:e.id,class:["icon-del",{article:t.sb===s}],attrs:{text:e.name},on:{click:function(e){return t.sonArticle(s)}}},[t._v(" "+t._s(e.name)+" "),t.delShow&&"推荐"!==e.name?a("van-icon",{attrs:{name:"cross"},on:{click:function(e){return t.changemy(s)}}}):t._e()],1)})),1)],1)]),a("div",[t._m(0),a("div",[a("van-grid",t._l(t.optChannel,(function(e){return a("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(a){return t.plus(e)}}})})),1)],1)])])},ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px 0"}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("可选频道")])])}],ht={name:"hmChannelEdit",data(){return{delShow:!1}},model:{prop:"sb",event:"hehe"},props:{myChannel:{type:Array,required:!0},AllChannel:{type:Array,required:!0},sb:{type:Number,required:!0}},computed:{optChannel(){return this.AllChannel.filter((t=>!this.myChannel.find((e=>e.id===t.id))))}},methods:{sonArticle(t){this.$emit("hehe",t),this.$emit("off")},async setChannels(){if(this.$store.state.tokenObj.token){const t=this.myChannel.map(((t,e)=>({id:t.id,seq:e})));console.log(t),await V({channels:t})}else window.localStorage.setItem("hm81",JSON.stringify(this.myChannel))},changemy(t){this.$emit("changemy",t),this.sb>t&&this.$emit("cut"),this.setChannels()},plus(t){this.$emit("plus",t),this.setChannels()}}},dt=ht,mt=(0,l.Z)(dt,ct,ut,!1,null,"75ea8502",null),pt=mt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"cache",on:{scroll:t.onscroll}},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return a("van-cell",{key:e.art_id},[[a("div",{on:{click:function(a){return t.$router.push({path:"/list",query:{id:e.art_id}})}}},[t._v(" "+t._s(e.title)+" ")]),a("van-grid",{attrs:{border:!1,"column-num":e.cover.type}},t._l(e.cover.images,(function(t,e){return a("van-grid-item",{key:e},[a("van-image",{staticStyle:{width:"100%"},attrs:{src:t}})],1)})),1)],[a("div",{staticClass:"boxP"},[a("div",[a("span",[t._v(t._s(e.aut_name))]),a("span",[t._v(t._s(e.comm_count)+"评论")]),a("span",[t._v(t._s(t._f("momentD")(e.pubdate)))])]),a("div",[a("van-icon",{attrs:{name:"cross"}})],1)])]],2)})),1)],1)],1)},vt=[],gt={props:["articlId"],name:"articleList",data(){return{list:[],loading:!1,finished:!1,timestamp:Date.now(),scrollTop:0}},activated(){this.$refs.cache.scrollTop=this.scrollTop},methods:{onscroll(){this.scrollTop=this.$refs.cache.scrollTop},async onLoad(){try{const t=await R({channel_id:this.articlId,timestamp:this.timestamp});this.list.push(...t.data.data.results),this.timestamp=t.data.data.pre_timestamp,this.loading=!1,null==this.timestamp&&(this.finished=!0)}catch(t){}},async onRefresh(){try{const t=await R({channel_id:this.articlId,timestamp:Date.now()});this.list=t.data.data.results,this.timestamp=t.data.data.pre_timestamp,this.loading=!1}catch(t){}}}},yt=gt,_t=(0,l.Z)(yt,ft,vt,!1,null,"2c1282f2",null),kt=_t.exports,bt={name:"HmHome",components:{articleList:kt,hmChannelEdit:pt},data(){return{channels:[],Allchannel:[],Channel:!1,article:0}},created(){P().then((t=>{const e=JSON.parse(window.localStorage.getItem("hm81"));this.$store.state.tokenObj.token||!e?this.channels=t.data.data.channels:this.channels=e})),K().then((t=>{this.Allchannel=t.data.data.channels}))}},jt=bt,wt=(0,l.Z)(jt,rt,lt,!1,null,"2e8f1b04",null),Ct=wt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("问答")])},$t=[],Zt={name:"HmAsk"},St=Zt,Dt=(0,l.Z)(St,xt,$t,!1,null,null,null),Ot=Dt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"profile-box"},[a("van-image",{attrs:{round:"",fit:"cover",src:t.info.photo}}),a("div",[a("h3",{staticClass:"name"},[t._v(t._s(t.info.mobile))]),a("h4",{staticClass:"birth"},[t._v(t._s(t.info.birthday))])])],1),a("van-row",[a("van-col",{attrs:{span:"8"}},[a("van-icon",{staticClass:"works",attrs:{name:"newspaper-o"}}),a("span",[t._v("我的作品")])],1),a("van-col",{attrs:{span:"8"}},[a("van-icon",{staticClass:"Collection",attrs:{name:"star-o"}}),a("span",[t._v("我的收藏")])],1),a("van-col",{attrs:{span:"8"}},[a("van-icon",{staticClass:"history",attrs:{name:"tosend"}}),a("span",[t._v("阅读历史")])],1)],1),a("van-cell-group",[a("van-cell",{attrs:{to:"/mine/edit",title:"编辑资料",icon:"edit","is-link":""}}),a("van-cell",{attrs:{to:"/mine/chat?id="+t.info.photo,title:"小智同学",icon:"chat-o","is-link":""}}),a("van-cell",{attrs:{title:"系统设置",icon:"setting-o","is-link":""}}),a("van-cell",{attrs:{title:"退出登录",icon:"warning-o","is-link":""},on:{click:t.logout}})],1)],1)},Lt=[],Ht={name:"HmMine",computed:{...(0,g.rn)({info:"userInfo"})},created(){this.$store.dispatch("getUserInfo")},methods:{logout(){this.$store.commit("logout"),this.$toast.success("退出成功"),this.$router.push("/login")}}},zt=Ht,Nt=(0,l.Z)(zt,It,Lt,!1,null,"a7ff2168",null),Et=Nt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("视频")])},Tt=[],Ut={name:"HmVideo"},At=Ut,Mt=(0,l.Z)(At,qt,Tt,!1,null,null,null),Pt=Mt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"编辑资料","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),a("div",{staticClass:"upData-edit"},[a("van-uploader",{attrs:{"after-read":t.afterRead}}),a("van-image",{attrs:{src:t.info.photo,fit:"cover",round:""}})],1),a("van-cell-group",[a("van-cell",{attrs:{title:"名称",value:t.info.name,"is-link":""},on:{click:t.changeName}}),a("van-cell",{attrs:{title:"性别",value:t.info.gender?"女":"男","is-link":""},on:{click:t.changeG}}),a("van-cell",{attrs:{title:"生日",value:t.info.birthday,"is-link":""},on:{click:t.changeBir}})],1),a("van-dialog",{attrs:{title:"修改名称","show-cancel-button":""},on:{confirm:t.UpDataN},model:{value:t.showName,callback:function(e){t.showName=e},expression:"showName"}},[a("van-field",{ref:"textName",staticClass:"textName",model:{value:t.editName,callback:function(e){t.editName="string"===typeof e?e.trim():e},expression:"editName"}})],1),a("van-popup",{style:{height:"30%"},attrs:{position:"bottom"},model:{value:t.showBir,callback:function(e){t.showBir=e},expression:"showBir"}},[a("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.UpDataBir},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),a("van-popup",{style:{height:"25%"},attrs:{position:"bottom"},model:{value:t.showGender,callback:function(e){t.showGender=e},expression:"showGender"}},[a("van-nav-bar",{attrs:{title:"修改性别","left-text":"取消"},on:{"click-left":t.onClickLeft}}),a("van-cell",{attrs:{title:"男","is-link":""},on:{click:function(e){return t.changeGender(0)}}}),a("van-cell",{attrs:{title:"女","is-link":""},on:{click:function(e){return t.changeGender(1)}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showImg,expression:"showImg"}],staticClass:"upImg"},[a("vueCropper",{ref:"cropper",attrs:{autoCrop:"",autoCropWidth:"200",autoCropHeight:"200",img:t.img}}),a("van-button",{attrs:{type:"primary"},on:{click:t.upDataI}},[t._v("裁剪")]),a("van-button",{staticStyle:{right:"0"},attrs:{type:"primary"}},[t._v("取消")])],1)],1)},Bt=[],Gt=a(7133),Jt=a.n(Gt),Kt=a(7086),Vt={name:"hmEdit",components:{VueCropper:Kt.VueCropper},data(){return{showName:!1,editName:"",showBir:!1,minDate:new Date(1950,0,1),maxDate:new Date,currentDate:new Date,showGender:!1,showImg:!1,img:""}},methods:{changeName(){this.showName=!0,this.editName=this.info.name,setTimeout((()=>{this.$refs.textName.focus()}),500)},async UpDataN(){try{if(""===this.editName)return this.$toast("输入为空");await A({name:this.editName}),this.$store.commit("changeUserInfo",{...this.info,name:this.info.name})}catch(t){}},changeBir(){this.showBir=!0,this.currentDate=new Date(this.info.birthday)},async UpDataBir(){try{const t=Jt()(this.currentDate).format("YYYY-MM-DD");await A({birthday:t}),this.$store.commit("changeUserInfo",{...this.info,birthday:t}),this.showBir=!1}catch(t){}},changeG(){this.showGender=!0},onClickLeft(){this.showGender=!1},async changeGender(t){try{await A({gender:t}),this.$store.commit("changeUserInfo",{...this.info,gender:t}),this.showGender=!1}catch(e){}},afterRead(t){this.img=t.content,this.showImg=!0},upDataI(){try{this.$refs.cropper.getCropBlob((async t=>{const e=new FormData;e.append("photo",t);const a=await M(e);this.$store.commit("changeUserInfo",{...this.info,photo:a.data.data.photo})})),this.showImg=!1}catch(t){}}},computed:{...(0,g.rn)({info:"userInfo"})},created(){this.$store.dispatch("getUserInfo")}},Yt=Vt,Ft=(0,l.Z)(Yt,Rt,Bt,!1,null,"72d11e24",null),Wt=Ft.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"小智同学"},on:{"click-left":function(e){return t.$router.back()}}}),a("div",{ref:"chatList",staticClass:"chat-list"},[t._l(t.list,(function(e,s){return[e.isMe?a("div",{key:s,staticClass:"chat-item right"},[a("div",{staticClass:"chat-pao my"},[t._v(" "+t._s(e.msg)+" ")]),a("van-image",{attrs:{fit:"cover",round:"",src:t.$route.query.id}})],1):a("div",{key:s,staticClass:"chat-item left"},[a("van-image",{attrs:{fit:"cover",round:"",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),a("div",{staticClass:"chat-pao"},[t._v(" "+t._s(e.msg)+" ")])],1)]}))],2),a("div",{staticClass:"reply-container van-hairline--top"},[a("van-field",{attrs:{placeholder:"说点什么..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},model:{value:t.value,callback:function(e){t.value="string"===typeof e?e.trim():e},expression:"value"}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"},attrs:{slot:"button"},on:{click:t.send},slot:"button"},[t._v(" 提交 ")])])],1)],1)},Xt=[],te=a(1693),ee={name:"hmChat",data(){return{value:"",socket:null,list:[]}},created(){this.socket=(0,te.io)("http://toutiao.itheima.net",{query:{token:this.$store.state.tokenObj.token},transports:["websocket"]}),this.socket.on("message",(t=>{this.list.push({isMe:!1,msg:t.msg,date:t.timestamp}),this.$nextTick((()=>{this.$refs.chatList.scrollTop=this.$refs.chatList.scrollHeight}))}))},methods:{send(){if(""===this.value)return alert("请输入内容");this.socket.emit("message",{msg:this.value,timestamp:Date.now()}),this.list.push({isMe:!0,msg:this.value,date:Date.now()}),this.value="",this.$nextTick((()=>{this.$refs.chatList.scrollTop=this.$refs.chatList.scrollHeight}))}}},ae=ee,se=(0,l.Z)(ae,Qt,Xt,!1,null,"f3bacc50",null),ne=se.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("van-nav-bar",{attrs:{placeholder:"",fixed:"",title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}})],1),a("div",{staticClass:"title"},[a("h6",[t._v(t._s(t.list.title))])]),a("div",{staticClass:"concent"},[a("div",{staticClass:"aut"},[a("div",{staticClass:"left"},[a("div",{staticClass:"img"},[a("van-image",{attrs:{round:"",fit:"cover",src:t.list.aut_photo}})],1),a("div",{staticClass:"text"},[a("h5",[t._v(t._s(t.list.aut_name))]),a("p",[t._v(t._s(t._f("momentD")(t.list.pubdate)))])])]),a("div",{staticClass:"button"},[a("van-button",{attrs:{round:"",icon:"plus",type:"primary"}},[t._v("关注")])],1)])]),a("div",{staticClass:"list-content",domProps:{innerHTML:t._s(t.list.content)}}),a("van-divider",[t._v("end")]),a("div",{staticClass:"button-b"},[a("van-button",{attrs:{round:"",icon:"plus",type:"primary"}},[t._v("点赞")]),a("van-button",{attrs:{round:"",icon:"plus",type:"primary"}},[t._v("不喜欢")])],1),a("HmComment")],1)},oe=[],re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.comData,(function(e){return a("van-cell",{key:e.com_id},[a("div",{staticClass:"aut-comm"},[a("div",{staticClass:"img"},[a("van-image",{attrs:{round:"",fit:"cover",src:e.aut_photo}})],1),a("div",{staticClass:"a-content"},[a("h3",{staticClass:"aut_name"},[t._v(t._s(e.aut_name))]),a("h3",{staticClass:"article",domProps:{innerHTML:t._s(e.content)}}),a("h3",{staticClass:"pubdate"},[t._v(" "+t._s(t._f("momentD")(e.pubdate))+" "),a("van-button",{attrs:{type:"default"},on:{click:function(a){return t.popup(e)}}},[t._v("回复("+t._s(e.reply_count)+")")])],1)]),a("div",{staticClass:"like"},[a("van-icon",{attrs:{name:"like-o"}})],1)])])})),1),a("div",{staticClass:"comment"},[a("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.upSet.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info"},on:{click:t.upSet}},[t._v("发布")])]},proxy:!0}]),model:{value:t.sms,callback:function(e){t.sms="string"===typeof e?e.trim():e},expression:"sms"}})],1),a("div",[a("van-action-sheet",{attrs:{title:"回复列表"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[t.isShow?a("HmReply",{attrs:{Data:t.sourceId},on:{reply:function(e){t.sourceId.reply_count++}}}):t._e()],1)],1)],1)},le=[],ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell",[a("div",{staticClass:"aut-comm"},[a("div",{staticClass:"img"},[a("van-image",{attrs:{round:"",fit:"cover",src:t.Data.aut_photo}})],1),a("div",{staticClass:"a-content"},[a("h3",{staticClass:"aut_name"},[t._v(t._s(t.Data.aut_name))]),a("h3",{staticClass:"article",domProps:{innerHTML:t._s(t.Data.content)}}),a("h3",{staticClass:"pubdate"},[t._v(" "+t._s(t._f("momentD")(t.Data.pubdate))+" ")])])])]),a("van-divider"),a("van-divider",[t._v("回复列表")]),a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.comData,(function(e){return a("van-cell",{key:e.com_id},[a("div",{staticClass:"aut-comm"},[a("div",{staticClass:"img"},[a("van-image",{attrs:{round:"",fit:"cover",src:e.aut_photo}})],1),a("div",{staticClass:"a-content"},[a("h3",{staticClass:"aut_name"},[t._v(t._s(e.aut_name))]),a("h3",{staticClass:"article",domProps:{innerHTML:t._s(e.content)}}),a("h3",{staticClass:"pubdate"})])])])})),1),a("div",{staticClass:"comment"},[a("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.upSet.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info"},on:{click:t.upSet}},[t._v("发布")])]},proxy:!0}]),model:{value:t.sms,callback:function(e){t.sms="string"===typeof e?e.trim():e},expression:"sms"}})],1)],1)},ue=[],he={props:["Data"],name:"HmReply",data(){return{sms:"",list:[],loading:!1,finished:!1,comData:[],offset:null,total_count:0,isShow:!1}},methods:{async onLoad(){const t=await J({type:"c",source:this.Data.com_id,offset:this.offset});this.comData.push(...t.data.data.results),this.offset=t.data.data.last_id,this.total_count=t.data.data.total_count,this.loading=!1,t.data.data.end_id===this.offset&&(this.finished=!0)},async upSet(){try{const t=await G({target:this.Data.com_id,content:this.sms,art_id:this.$route.query.id});this.comData.unshift(t.data.data.new_obj),this.sms="",this.$emit("reply")}catch(t){}}}},de=he,me=(0,l.Z)(de,ce,ue,!1,null,"762f8372",null),pe=me.exports,fe={name:"HmComment",components:{HmReply:pe},data(){return{sms:"",list:[],loading:!1,finished:!1,comData:[],offset:null,total_count:0,isShow:!1,sourceId:""}},methods:{async onLoad(){const t=await J({type:"a",source:this.$route.query.id,offset:this.offset});console.log(t),this.comData.push(...t.data.data.results),this.offset=t.data.data.last_id,this.total_count=t.data.data.total_count,this.loading=!1,t.data.data.end_id===this.offset&&(this.finished=!0)},async upSet(){try{const t=await G({target:this.$route.query.id,content:this.sms});this.total_count=t.data.data.total_count,this.comData.unshift(t.data.data.new_obj),this.sms=""}catch(t){}},popup(t){this.isShow=!0,this.sourceId=t}}},ve=fe,ge=(0,l.Z)(ve,re,le,!1,null,"4e419ec3",null),ye=ge.exports,_e={name:"HmLists",components:{HmComment:ye},data(){return{list:{}}},async created(){try{const t=await B(this.$route.query.id);this.list=t.data.data}catch(t){}}},ke=_e,be=(0,l.Z)(ke,ie,oe,!1,null,"3baf5212",null),je=be.exports,we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"搜索","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),a("div",[a("van-search",{attrs:{shape:"round","show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[a("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}]},t._l(t.newList,(function(e,s){return a("van-cell",{key:s,on:{click:function(e){return t.gogo(s)}}},[a("p",{domProps:{innerHTML:t._s(e)}})])})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}]},[a("van-cell-group",[a("van-cell",{attrs:{title:"历史记录"}}),t._l(t.title,(function(e,s){return a("van-cell",{key:s,attrs:{title:e},on:{click:function(a){return t.goSearch(e)}}})}))],2)],1)],1)},Ce=[],xe={name:"HmSearch",data(){return{isshow:!1,value:"",title:[],list:[],newList:[]}},methods:{gogo(t){this.$router.push({name:"HmResult",query:{key:this.list[t]}})},goSearch(t){this.$router.push({name:"HmResult",query:{key:t}})},onSearch(){this.value&&(this.title.includes(this.value)||(this.title.unshift(this.value),window.localStorage.setItem("Historical",JSON.stringify(this.title)))),this.$router.push({name:"HmResult",query:{key:this.value}}),this.value=""}},created(){const t=JSON.parse(window.localStorage.getItem("Historical"));t&&(this.title=t)},watch:{async value(t){try{if(t){this.isshow=!0;const e=await F({q:t});e.data.data.options[0]&&(this.list=e.data.data.options);const a=new RegExp(t,"gi"),s=this.list.map((e=>e.replace(a,`<span style="color: #f00">${t}</span>`)));this.newList=s}else this.isshow=!1}catch(e){}}}},$e=xe,Ze=(0,l.Z)($e,we,Ce,!1,null,null,null),Se=Ze.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"搜索  "+t.title}}),a("div",[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return a("van-cell",{key:e.art_id,attrs:{title:e.title},on:{click:function(a){return t.$router.push({name:"HmLists",query:{id:e.art_id}})}}})})),1)],1)],1)},Oe=[],Ie={name:"HmResult",data(){return{list:[],title:this.$route.query.key,page:1,loading:!1,finished:!1}},methods:{async onLoad(){const t=this.$route.query.key,e=await Y({page:this.page,q:t});this.page++,this.list.push(...e.data.data.results),this.loading=!1,this.list.length>=e.data.data.total_count&&(this.finished=!0)}}},Le=Ie,He=(0,l.Z)(Le,De,Oe,!1,null,null,null),ze=He.exports;s.Z.use(d.Z);const Ne=[{path:"",redirect:"/layout/home"},{name:"login",path:"/login",component:tt},{name:"hmChat",path:"/mine/chat",component:ne},{name:"HmResult",path:"/result",component:ze,meta:{needKeep:!0}},{name:"HmSearch",path:"/search",component:Se},{name:"edit",path:"/mine/edit",component:Wt,meta:{needLogin:!0}},{name:"HmLists",path:"/list",component:je},{name:"layOut",path:"/layout",component:ot,children:[{name:"HmHome",path:"home",component:Ct,meta:{needKeep:!0}},{name:"HmAsk",path:"ask",component:Ot},{name:"HmVideo",path:"video",component:Pt},{name:"HmMine",path:"mine",component:Et,meta:{needLogin:!0}}]}],Ee=new d.Z({routes:Ne});Ee.beforeEach(((t,e,a)=>{t.meta.needLogin?j.state.tokenObj.token?a():(h.Z.fail("请先登录"),a({name:"login",query:{back:t.path}})):a()}));var qe=Ee,Te=(a(1821),a(2314),a(1802)),Ue=(a(8134),a(2084)),Ae=(a(4480),a(3594)),Me=(a(4870),a(4327)),Pe=(a(9785),a(8862)),Re=(a(5180),a(3316)),Be=(a(6278),a(7882)),Ge=(a(8114),a(8033)),Je=(a(3257),a(9327)),Ke=(a(4138),a(7129)),Ve=(a(1031),a(6586)),Ye=(a(9035),a(9702)),Fe=(a(7542),a(1404)),We=(a(4663),a(338)),Qe=(a(9497),a(7384)),Xe=(a(7057),a(1911)),ta=(a(2943),a(7735)),ea=(a(9735),a(520)),aa=(a(6139),a(8235)),sa=(a(4112),a(5731)),na=(a(5758),a(5803)),ia=(a(6283),a(1197)),oa=(a(8395),a(5263)),ra=(a(8409),a(9138)),la=(a(5979),a(9851));s.Z.use(la.Z),s.Z.use(ra.Z),s.Z.use(oa.Z),s.Z.use(ia.Z),s.Z.use(h.Z),s.Z.use(na.Z),s.Z.use(sa.Z),s.Z.use(aa.Z),s.Z.use(ea.Z),s.Z.use(ta.Z),s.Z.use(Xe.Z),s.Z.use(Qe.Z),s.Z.use(We.Z),s.Z.use(Fe.Z),s.Z.use(Ye.Z),s.Z.use(Ve.Z),s.Z.use(Ke.Z),s.Z.use(Je.Z),s.Z.use(Ge.Z),s.Z.use(Be.Z),s.Z.use(Re.Z),s.Z.use(Pe.Z),s.Z.use(Me.Z),s.Z.use(Ae.Z),s.Z.use(Ue.Z),s.Z.use(Te.Z),Jt().locale("zh-cn"),s.Z.filter("momentD",(t=>Jt()(t).fromNow())),s.Z.config.productionTip=!1,new s.Z({router:qe,store:j,render:t=>t(u)}).$mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],i=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,o=s[0],r=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var u=l(a)}for(e&&e(s);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkhtml81"]=self["webpackChunkhtml81"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7926)}));s=a.O(s)})();